(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/application/useLetter/useLetter"],{"09f0":function(e,t,s){"use strict";s.r(t);var a=s("f313"),n=s("fc04");for(var i in n)"default"!==i&&function(e){s.d(t,e,function(){return n[e]})}(i);s("57b7");var o=s("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,null,null);t["default"]=c.exports},"3fdc":function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,n=s("43ce"),i=s("33bf"),o=s("1ea5");function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var r=function(){return s.e("components/uni-popup/uni-popup").then(s.bind(null,"b072"))},u=function(){return s.e("components/tki-file-manager").then(s.bind(null,"16fd"))},l={components:{tkiFileManager:u,uniPopup:r},data:function(){return{index:0,array:[],arrayInfo:[],index2:0,array2:[],array2Info:[],items1:[{value:"1",name:"是"},{value:"0",name:"否"}],current1:0,items2:[{value:"1",name:"是"},{value:"0",name:"否"}],current2:0,items3:[{value:"1",name:"是"},{value:"0",name:"否"}],current3:0,isdis:!1,getType:[],businessData:{customer_name:"",customer_id:"",cust_type:"",busType:"01",certType:"身份证",certNo:"",productName:"",contractNo:"",categoryAmount:"",amountAvailable:"",applyAmount:"",currency:"",applicationPeriod:"",natureLoan:"",loan:"",loansTo:"",loadType:"",useProceeds:"",loanTypes:"",useDetail:"",reimbursementMeans:"",sourceRepayment:"",interestSettlementWay:"",exitMeasures:"",exitDeadline:"",marketPer:"",isMarketingLoan:"1",isCorporateLoan:"1",isStockLoans:"1",applayReason:""},type:"",getUserInfo:[],list:[],path:[],userIds:"",seq:"",isUp:!1,ishold:!1}},onNavigationBarButtonTap:function(e){this.isKeep()},onLoad:function(){this.businessData.applay_date=(0,i.formateDate)(new Date,"Y-M-D"),this.getProType(),this.getUserType()},beforeDestroy:function(){return!1},methods:(a={doUpload:function(){if(this.ishold)if(0!=this.path.length){e.showLoading({title:"上传中",mask:!0});var t=[];this.path.map(function(e,s){t[s]={name:s+1,uri:""}}),this.path.map(function(e,s){t[s].uri=e});var s=this,a="http://".concat((0,n.baseIp)(),"/ams/system/distribute.htm?module=PJupload&userId=").concat((0,o.getUserInfo)().userId,"&mainId=").concat(s.seq);e.uploadFile({url:a,filePath:"",name:"",files:t,success:function(t){if("string"==typeof t.data)var a=JSON.parse(t.data);else a=t.data;1==a.code&&(s.isUp=!0,e.hideLoading(),e.showToast({title:a.message,mask:!0}))}})}else e.showToast({title:"请先选择资料！",icon:"none"});else e.showModal({title:"您还没有保存",content:"您还没有保存数据，请先保存！",success:function(e){e.confirm||e.cancel}})},getUserType:function(){var t=this;e.request({url:"http://"+(0,n.baseIp)()+"/ams/system/distribute.htm?module=pullDown&XLX=customerType",success:function(e){var s=e.data;t.array2Info=s.object,s=s.object.map(function(e){return e.name}),s.unshift("请选择客户类型"),t.array2=s}})},getProType:function(){var t=this;e.request({url:"http://"+(0,n.baseIp)()+"/ams/system/distribute.htm?module=pullDown&XLX=busType2",success:function(e){var s=e.data;t.arrayInfo=s.object,s=s.object.map(function(e){return e.name}),t.array=s,t.businessData.title=t.arrayInfo[0].code}})},radioChange2:function(e){for(var t=0;t<this.items2.length;t++)if(this.items2[t].value===e.target.value){this.current2=t,1==t?this.businessData.bandsman="多人":0==t&&(this.businessData.bandsman="单人");break}},radioChange3:function(e){for(var t=0;t<this.items3.length;t++)if(this.items3[t].value===e.target.value){this.current3=t,1==t?this.businessData.mortgageType="抵押物所有权人":0==t&&(this.businessData.mortgageType="抵押物");break}},checkboxChange:function(e){for(var t=this.businessData.type,s=e.detail.value,a=0,n=t.length;a<n;++a){var i=t[a];s.includes(i.value)?this.$set(i,"checked",!0):this.$set(i,"checked",!1)}-1!=s.indexOf("保证")&&(this.businessData.bandsman="单人"),-1!=s.indexOf("抵押")&&(this.businessData.mortgageType="抵押物"),this.getType=t.filter(function(e){return 1==e.checked});var o=this.getType.map(function(e){return e.value});this.businessData.loadType=o.join(",")},radioChange1:function(e){for(var t=0;t<this.items1.length;t++)if(this.items1[t].name===e.target.value){this.current1=t,this.businessData.isMarketingLoan=0==t?1:0;break}}},c(a,"radioChange2",function(e){for(var t=0;t<this.items2.length;t++)if(this.items2[t].name===e.target.value){this.current2=t,this.businessData.isCorporateLoan=0==t?1:0;break}}),c(a,"radioChange3",function(e){for(var t=0;t<this.items3.length;t++)if(this.items3[t].name===e.target.value){this.current3=t,this.businessData.isStockLoans=0==t?1:0;break}}),c(a,"bindPickerChange",function(e){this.index=e.target.value,this.businessData.busType=this.arrayInfo[e.target.value].code}),c(a,"bindPickerChange2",function(t){this.index2=t.target.value,0!=t.target.value?this.businessData.cust_type=this.array2Info[t.target.value-1].code:e.showToast({title:"选择失败",icon:"none"})}),c(a,"bindPickerChange3",function(t){var s=this;this.index3=t.target.value,0!=t.target.value?e.request({url:"http://".concat((0,n.baseIp)(),"/ams/system/distribute.htm?module=check_person&dept_id=").concat(s.array3Info[t.target.value].id-1),success:function(t){var a=t.data;if(0==a.object.length)e.showToast({title:"选择失败，请重新选择！",icon:"none"}),s.index3=0,s.array3_1=[],s.businessData.userIds2="";else{s.array3_1Info=a.object,e.showToast({title:"请选择具体信息",icon:"none"});var n=a.object.map(function(e){return e.dept_name});s.array3_1=n,s.businessData.userIds2=String(s.array3_1Info[s.index3_1].id)}}}):e.showToast({title:"选择失败",icon:"none"})}),c(a,"bindPickerChange3_1",function(e){this.index3_1=e.target.value,this.businessData.userIds2=String(this.array3_1Info[this.index3_1].id)}),c(a,"bindPickerChange4",function(t){this.index4=t.target.value,0!=t.target.value?this.businessData.evaluate_modle=this.array4Info[t.target.value-1].code:e.showToast({title:"选择失败",icon:"none"})}),c(a,"bindPickerChange5",function(t){this.index5=t.target.value,0!=t.target.value?this.businessData.creditRating=this.array5Info[t.target.value-1].code:e.showToast({title:"选择失败",icon:"none"})}),c(a,"bindPickerChange6",function(t){this.index6=t.target.value,0!=t.target.value?this.businessData.lastLevel=this.array6Info[t.target.value-1].code:e.showToast({title:"选择失败",icon:"none"})}),c(a,"togglePopup",function(e){this.type=e}),c(a,"submitAcce",function(){if(this.ishold){if(!this.isUp)return void e.showModal({title:"您还没有上传资料",content:"您还没有上传资料，请先上传！",success:function(e){e.confirm||e.cancel}});var t=this;e.showLoading({title:"提交中",mask:!0}),e.request({url:"http://".concat((0,n.baseIp)(),"/ams/system/distribute.htm?module=submitMainInfo6_YD&Id=").concat(t.seq,"&userIds=").concat(t.businessData.userIds),success:function(t){var s=t.data;e.hideLoading(),1==s.code&&(e.showToast({title:s.message,duration:3e3,mask:!0}),setTimeout(function(){e.reLaunch({url:"/pages/tabBar/information/information"})},3e3))},fail:function(e){console.log(e," at pages\\application\\useLetter\\useLetter.vue:649")}})}else e.showModal({title:"您还没有保存",content:"您还没有保存数据，请先保存！",success:function(e){e.confirm?console.log("用户点击确定"," at pages\\application\\useLetter\\useLetter.vue:609"):e.cancel&&console.log("用户点击取消"," at pages\\application\\useLetter\\useLetter.vue:611")}})}),c(a,"getName",function(e,t){this.businessData.customer_name=this.getUserInfo[t].customer_name,this.businessData.customer_id=this.getUserInfo[t].customer_id,this.type="",this.isdis=!0}),c(a,"openFile",function(){this.$refs.filemanager._openFile()}),c(a,"resultPath",function(e){this.path.push("file://".concat(e))}),c(a,"delList",function(e){this.path.splice(e.target.dataset.value,1)}),c(a,"retrieval",function(){var t=this;if(""==this.businessData.customer_name)e.showToast({title:"请输入客户名称",duration:2e3,icon:"none"});else{e.showLoading({title:"检索中",mask:!0});var s="http://".concat((0,n.baseIp)(),"/ams/system/distribute.htm?module=checkCustomer&customerName=").concat(t.businessData.customer_name);e.request({url:s,success:function(s){e.hideLoading();var a=s.data;if(0==a.object.length)t.type="",t.list=a.object,e.showToast({title:"暂无数据"});else{t.getUserInfo=a.object;var n=a.object.map(function(e){return e.customer_name});t.type="middle-list",t.list=n}},fail:function(t){console.log(t," at pages\\application\\useLetter\\useLetter.vue:704"),e.hideLoading()}})}}),c(a,"isKeep",function(){if(this.ishold)e.showToast({title:"您已经保存过了！"});else{var t=/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;if(""!=this.businessData.customer_name)if(""!=this.businessData.customer_id)if(""!=this.businessData.cust_type)if(""!=this.businessData.certNo)if(t.test(this.businessData.certNo))e.showToast({title:"请填写正确的证件号码",icon:"none",mask:!0});else if(""!=this.businessData.productName)if(""!=this.businessData.contractNo)if(""!=this.businessData.categoryAmount)if(""!=this.businessData.amountAvailable)if(""!=this.businessData.applyAmount)if(""!=this.businessData.currency)if(""!=this.businessData.applicationPeriod)if(""!=this.businessData.natureLoan)if(""!=this.businessData.loan)if(""!=this.businessData.loansTo)if(""!=this.businessData.loadType)if(""!=this.businessData.useProceeds)if(""!=this.businessData.loanTypes)if(""!=this.businessData.useDetail)if(""!=this.businessData.reimbursementMeans)if(""!=this.businessData.sourceRepayment)if(""!=this.businessData.interestSettlementWay)if(""!=this.businessData.exitMeasures)if(""!=this.businessData.exitDeadline)if(""!=this.businessData.marketPer){var s=this.businessData,a="http://".concat((0,n.baseIp)(),'/ams/system/distribute.htm?module=addFinanceInfo2_YD&credit={userId:"').concat((0,o.getUserInfo)().userId,'",busType:"').concat(s.busType,'",customerName:"').concat(s.customer_name,'",customerId:"').concat(s.customer_id,'",custType:"').concat(s.cust_type,'",certType:"').concat(s.certType,'",certNo:"').concat(s.certNo,'",productName:"').concat(s.productName,'",contractNo:"').concat(s.contractNo,'",categoryAmount:"').concat(s.categoryAmount,'",amountAvailable:"').concat(s.amountAvailable,'",applyAmount:"').concat(s.applyAmount,'",currency:"').concat(s.currency,'",applicationPeriod:"').concat(s.applicationPeriod,'",natureLoan:"').concat(s.natureLoan,'",loan:"').concat(s.loan,'",loansTo:"').concat(s.loansTo,'",loadType:"').concat(s.loadType,'",useProceeds:"').concat(s.useProceeds,'",loanTypes:"').concat(s.loanTypes,'",useDetail:"').concat(s.useDetail,'",reimbursementMeans:"').concat(s.reimbursementMeans,'",sourceRepayment:"').concat(s.sourceRepayment,'",interestSettlementWay:"').concat(s.interestSettlementWay,'",exitMeasures:"').concat(s.exitMeasures,'",exitDeadline:"').concat(s.exitDeadline,'",marketPer:"').concat(s.marketPer,'",isMarketingLoan:"').concat(s.isMarketingLoan,'",isCorporateLoan:"').concat(s.isCorporateLoan,'",isStockLoans:"').concat(s.isStockLoans,'",applayReason:"').concat(s.applayReason,'"}');console.log(a," at pages\\application\\useLetter\\useLetter.vue:829");var i=this;e.showModal({title:"是否保存",content:"您还没有保存数据，是否保存？",success:function(t){t.confirm&&(e.showLoading({title:"保存中",mask:!0}),e.request({url:a,success:function(t){var s=t.data;1==s.code&&(e.hideLoading(),e.showToast({title:"请及时提交!",mask:!0,duration:2e3}),i.userIds=s.object.userIds,i.ishold=!0,i.seq=s.object.seq)},fail:function(t){console.log(t," at pages\\application\\useLetter\\useLetter.vue:853"),e.hideLoading()}}))}})}else e.showToast({title:"请填写营销人",icon:"none",mask:!0});else e.showToast({title:"请填写退出期限",icon:"none",mask:!0});else e.showToast({title:"请填写退出措施",icon:"none",mask:!0});else e.showToast({title:"请填写结息方式",icon:"none",mask:!0});else e.showToast({title:"请填写还款来源",icon:"none",mask:!0});else e.showToast({title:"请填写还款方式",icon:"none",mask:!0});else e.showToast({title:"请填写用途明细",icon:"none",mask:!0});else e.showToast({title:"请填写贷款种类",icon:"none",mask:!0});else e.showToast({title:"请填写贷款用途",icon:"none",mask:!0});else e.showToast({title:"请填写贷款类型",icon:"none",mask:!0});else e.showToast({title:"请填写贷款投向",icon:"none",mask:!0});else e.showToast({title:"请填写贷款方式",icon:"none",mask:!0});else e.showToast({title:"请填写贷款性质",icon:"none",mask:!0});else e.showToast({title:"请填写申请期限",icon:"none",mask:!0});else e.showToast({title:"请填写币种",icon:"none",mask:!0});else e.showToast({title:"请填写申请金额",icon:"none",mask:!0});else e.showToast({title:"请填写可用金额",icon:"none",mask:!0});else e.showToast({title:"请填写业务品种金额",icon:"none",mask:!0});else e.showToast({title:"请填写流资合同号",icon:"none",mask:!0});else e.showToast({title:"请填写产品名称",icon:"none",mask:!0});else e.showToast({title:"请填写证件号码",icon:"none",mask:!0});else e.showToast({title:"请选择客户类型",icon:"none",mask:!0});else e.showToast({title:"请检索客户id",icon:"none",mask:!0});else e.showToast({title:"请检索客户名称",icon:"none",mask:!0})}}),a)};t.default=l}).call(this,s("6e42")["default"])},"57b7":function(e,t,s){"use strict";var a=s("8d9f"),n=s.n(a);n.a},"8d9f":function(e,t,s){},f313:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c},n=[];s.d(t,"a",function(){return a}),s.d(t,"b",function(){return n})},fc04:function(e,t,s){"use strict";s.r(t);var a=s("3fdc"),n=s.n(a);for(var i in a)"default"!==i&&function(e){s.d(t,e,function(){return a[e]})}(i);t["default"]=n.a}},[["ad5d","common/runtime","common/vendor"]]]);