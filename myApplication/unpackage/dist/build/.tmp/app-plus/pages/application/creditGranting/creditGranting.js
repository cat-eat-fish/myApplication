(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/application/creditGranting/creditGranting"],{4721:function(t,e,a){"use strict";var s=a("8169"),n=a.n(s);n.a},"677e":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})},8169:function(t,e,a){},9917:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a("43ce"),n=a("33bf"),i=a("1ea5"),o=function(){return a.e("components/uni-popup/uni-popup").then(a.bind(null,"b072"))},r=function(){return a.e("components/tki-file-manager").then(a.bind(null,"16fd"))},c={components:{tkiFileManager:r,uniPopup:o},data:function(){return{index:0,array:[],arrayInfo:[],index2:0,array2:[],array2Info:[],index3:0,array3:[],array3Info:[],index3_1:0,array3_1:[],array3_1Info:[],index4:0,array4:[],array4Info:[],index5:0,array5:[],array5Info:[],index6:0,array6:[],array6Info:[],index7:0,array7:[],array7Info:[],index7_1:0,array7_1:[],array7_1Info:[],index8:0,array8:[],array8Info:[],isdis:!1,getType:[],items2:[{value:"单人",name:"单人"},{value:"多人",name:"多人"}],current2:0,items3:[{value:"0",name:"抵押物"},{value:"抵押物所有权人",name:"抵押物所有权人"}],current3:0,businessData:{type:[{value:"信用",name:"信用"},{value:"保证",name:"保证"},{value:"抵押",name:"抵押"},{value:"质押",name:"质押"}],loadType:"",creditRating:"",bandsman:"",mortgageType:"",zyp:"",use:"",rate:"",title:"",businessName:"授信认定审批",customer_name:"",customer_id:"",cust_type:"",controlPer:"",evaluate_modle:"",first_level:"",applay_date:"",applay_reason:"",userIds:"",userIds2:"",lastLevel:""},type:"",getUserInfo:[],list:[],path:[],userIds:"",seq:"",isUp:!1,ishold:!1}},onNavigationBarButtonTap:function(t){this.isKeep()},onLoad:function(){this.businessData.applay_date=(0,n.formateDate)(new Date,"Y-M-D");var e=this;t.request({url:"http://"+(0,s.baseIp)()+"/ams/system/distribute.htm?module=pullDown&XLX=sbType",success:function(t){var a=t.data;e.arrayInfo=a.object,a=a.object.map(function(t){return t.name}),e.array=a,e.businessData.title=e.arrayInfo[0].code}}),t.request({url:"http://"+(0,s.baseIp)()+"/ams/system/distribute.htm?module=pullDown&XLX=customerType",success:function(t){var a=t.data;e.array2Info=a.object,a=a.object.map(function(t){return t.name}),a.unshift("请选择客户类型"),e.array2=a}}),t.request({url:"http://"+(0,s.baseIp)()+"/ams/system/distribute.htm?module=pullDown&XLX=level_modle",success:function(t){var a=t.data;e.array4Info=a.object,a=a.object.map(function(t){return t.name}),a.unshift("请选择拟初评结果"),e.array4=a}}),t.request({url:"http://"+(0,s.baseIp)()+"/ams/system/distribute.htm?module=pullDown&XLX=levelType",success:function(t){var a=t.data;e.array6Info=e.array5Info=a.object,a=a.object.map(function(t){return t.name});var s=[].concat(a);a.unshift("请选择拟初评结果"),s.unshift("请选择上季度拟初评结果"),e.array5=a,e.array6=s}}),t.request({url:"http://"+(0,s.baseIp)()+"/ams/system/distribute.htm?module=check_dept",success:function(t){var a=t.data;e.array3Info=e.array7Info=a.object;var s=a.object.map(function(t){return t.dept_name}),n=[].concat(s);s.unshift("请选择营销责任人"),e.array3=s,n.unshift("请选择协助调查岗"),e.array7=n}}),this.getMonryList()},beforeDestroy:function(){return!1},methods:{doUpload:function(){if(this.ishold)if(0!=this.path.length){t.showLoading({title:"上传中",mask:!0});var e=[];this.path.map(function(t,a){e[a]={name:a+1,uri:""}}),this.path.map(function(t,a){e[a].uri=t});var a=this,n="http://".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=PJupload&userId=").concat((0,i.getUserInfo)().userId,"&mainId=").concat(a.seq);t.uploadFile({url:n,filePath:"",name:"",files:e,success:function(e){if("string"==typeof e.data)var s=JSON.parse(e.data);else s=e.data;1==s.code&&(a.isUp=!0,t.hideLoading(),t.showToast({title:s.message,mask:!0}))}})}else t.showToast({title:"请先选择资料！",icon:"none"});else t.showModal({title:"您还没有保存",content:"您还没有保存数据，请先保存！",success:function(t){t.confirm||t.cancel}})},radioChange2:function(t){for(var e=0;e<this.items2.length;e++)if(this.items2[e].value===t.target.value){this.current2=e,1==e?this.businessData.bandsman="多人":0==e&&(this.businessData.bandsman="单人");break}},radioChange3:function(t){for(var e=0;e<this.items3.length;e++)if(this.items3[e].value===t.target.value){this.current3=e,1==e?this.businessData.mortgageType="抵押物所有权人":0==e&&(this.businessData.mortgageType="抵押物");break}},checkboxChange:function(t){for(var e=this.businessData.type,a=t.detail.value,s=0,n=e.length;s<n;++s){var i=e[s];a.includes(i.value)?this.$set(i,"checked",!0):this.$set(i,"checked",!1)}-1!=a.indexOf("保证")&&(this.businessData.bandsman="单人"),-1!=a.indexOf("抵押")&&(this.businessData.mortgageType="抵押物"),this.getType=e.filter(function(t){return 1==t.checked});var o=this.getType.map(function(t){return t.value});this.businessData.loadType=o.join(",")},getMonryList:function(){var e=this,a="http://".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=pullDown&XLX=creditLimit");t.request({url:a,success:function(t){var a=t.data;e.array8Info=e.array8Info=a.object;var s=a.object.map(function(t){return t.name});s.unshift("请选择授信额度"),e.array8=s}})},bindPickerChange:function(t){this.index=t.target.value,this.businessData.title=this.arrayInfo[t.target.value].code},bindPickerChange2:function(e){this.index2=e.target.value,0!=e.target.value?this.businessData.cust_type=this.array2Info[e.target.value-1].code:t.showToast({title:"选择失败",icon:"none"})},bindPickerChange3:function(e){var a=this;this.index3=e.target.value,0!=e.target.value?t.request({url:"http://".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=check_person&dept_id=").concat(a.array3Info[e.target.value].id-1),success:function(e){var s=e.data;if(0==s.object.length)t.showToast({title:"选择失败，请重新选择！",icon:"none"}),a.index3=0,a.array3_1=[],a.businessData.userIds2="";else{a.array3_1Info=s.object,t.showToast({title:"请选择具体信息",icon:"none"});var n=s.object.map(function(t){return t.dept_name});a.array3_1=n,a.businessData.userIds2=String(a.array3_1Info[a.index3_1].id)}}}):t.showToast({title:"选择失败",icon:"none"})},bindPickerChange3_1:function(t){this.index3_1=t.target.value,this.businessData.userIds2=String(this.array3_1Info[this.index3_1].id)},bindPickerChange4:function(e){this.index4=e.target.value,0!=e.target.value?this.businessData.evaluate_modle=this.array4Info[e.target.value-1].code:t.showToast({title:"选择失败",icon:"none"})},bindPickerChange5:function(e){this.index5=e.target.value,0!=e.target.value?this.businessData.creditRating=this.array5Info[e.target.value-1].code:t.showToast({title:"选择失败",icon:"none"})},bindPickerChange6:function(e){this.index6=e.target.value,0!=e.target.value?this.businessData.lastLevel=this.array6Info[e.target.value-1].code:t.showToast({title:"选择失败",icon:"none"})},bindPickerChange7:function(e){var a=this;this.index7=e.target.value,0!=e.target.value?t.request({url:"http://".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=check_person&dept_id=").concat(a.array3Info[e.target.value].id-1),success:function(e){var s=e.data;if(0==s.object.length)t.showToast({title:"选择失败，请重新选择！"}),a.array7_1=[],a.businessData.userIds="";else{a.array7_1Info=s.object,t.showToast({title:"请选择具体信息",icon:"none"});var n=s.object.map(function(t){return t.dept_name});a.array7_1=n,a.businessData.userIds=String(a.array7_1Info[a.index7_1].id)}}}):t.showToast({title:"选择失败",icon:"none"})},bindPickerChange7_1:function(t){this.index7_1=t.target.value,this.businessData.userIds=String(this.array7_1Info[this.index7_1].id)},bindPickerChange8:function(e){this.index8=e.target.value,0!=e.target.value?this.businessData.controlPer=this.array8Info[e.target.value-1].code:t.showToast({title:"选择失败",icon:"none"})},togglePopup:function(t){this.type=t},submitAcce:function(){if(this.ishold){if(!this.isUp)return void t.showModal({title:"您还没有上传资料",content:"您还没有上传资料，请先上传！",success:function(t){t.confirm||t.cancel}});var e=this;t.showLoading({title:"提交中",mask:!0}),t.request({url:"http://".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=submitMainInfo5_YD&Id=").concat(e.seq,"&userIds=").concat(e.businessData.userIds),success:function(e){var a=e.data;t.hideLoading(),1==a.code&&(t.showToast({title:a.message,duration:3e3,mask:!0}),setTimeout(function(){t.reLaunch({url:"/pages/tabBar/information/information"})},3e3))},fail:function(t){console.log(t," at pages\\application\\creditGranting\\creditGranting.vue:672")}})}else t.showModal({title:"您还没有保存",content:"您还没有保存数据，请先保存！",success:function(t){t.confirm?console.log("用户点击确定"," at pages\\application\\creditGranting\\creditGranting.vue:632"):t.cancel&&console.log("用户点击取消"," at pages\\application\\creditGranting\\creditGranting.vue:634")}})},getName:function(t,e){this.businessData.customer_name=this.getUserInfo[e].customer_name,this.businessData.customer_id=this.getUserInfo[e].customer_id,this.type="",this.isdis=!0},openFile:function(){this.$refs.filemanager._openFile()},resultPath:function(t){this.path.push("file://".concat(t))},delList:function(t){this.path.splice(t.target.dataset.value,1)},retrieval:function(){var e=this;if(""==this.businessData.customer_name)t.showToast({title:"请输入客户名称",duration:2e3,icon:"none"});else{t.showLoading({title:"检索中",mask:!0});var a="http://".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=checkCustomer&customerName=").concat(e.businessData.customer_name);t.request({url:a,success:function(a){t.hideLoading();var s=a.data;if(0==s.object.length)e.type="",e.list=s.object,t.showToast({title:"暂无数据"});else{e.getUserInfo=s.object;var n=s.object.map(function(t){return t.customer_name});e.type="middle-list",e.list=n}},fail:function(e){console.log(e," at pages\\application\\creditGranting\\creditGranting.vue:725"),t.hideLoading()}})}},isKeep:function(){if(this.ishold)t.showToast({title:"您已经保存过了！"});else if(""!=this.businessData.customer_name)if(""!=this.businessData.customer_id)if(""!=this.businessData.cust_type)if(""!=this.businessData.controlPer)if(""!=this.businessData.evaluate_modle)if(""!=this.businessData.creditRating)if(""!=this.businessData.use)if(""!=this.businessData.rate)if(""!=this.businessData.userIds)if(0!=this.getType.lenth)if(1!=this.businessData.type[1].checked||""!=this.businessData.bandsman)if(1!=this.businessData.type[2].checked||""!=this.businessData.bandsman)if(1!=this.businessData.type[3].checked||""!=this.businessData.pledge){var e=this.businessData;e.user_id=String((0,i.getUserInfo)().userId),e.bus_code="";var a="http://".concat((0,s.baseIp)(),'/ams/system/distribute.htm?module=addCreditInfo_YD&credit={userId:"').concat(e.user_id,'",title:"').concat(e.title,'",customer_name:"').concat(e.customer_name,'",customer_id:"').concat(e.customer_id,'",cust_type:"').concat(e.cust_type,'",applyCreditLine:"').concat(e.controlPer,'",evaluate_modle:"').concat(e.evaluate_modle,'",creditRating:"').concat(e.creditRating,'",useProceeds:"').concat(e.use,'",applay_reason:"').concat(e.applay_reason,'",rateInterest:"').concat(e.rate,'",userIds:"').concat(e.userIds,'",bandsman:"').concat(e.bandsman,'",mortgageType:"').concat(e.mortgageType,'",pledge:"').concat(e.zyp,'",loadType:"').concat(e.loadType,'"}'),n=this;t.showModal({title:"是否保存",content:"您还没有保存数据，是否保存？",success:function(e){e.confirm&&(t.showLoading({title:"保存中",mask:!0}),t.request({url:a,success:function(e){var a=e.data;1==a.code&&(t.hideLoading(),t.showToast({title:"请及时提交!",mask:!0,duration:2e3}),n.userIds=a.object.userIds,n.ishold=!0,n.seq=a.object.seq)},fail:function(e){console.log(e," at pages\\application\\creditGranting\\creditGranting.vue:864"),t.hideLoading()}}))}})}else t.showToast({title:"请输入质押品",icon:"none"});else t.showToast({title:"请选择选择抵押类型",icon:"none"});else t.showToast({title:"请选择选择担保人",icon:"none"});else t.showToast({title:"请选择贷款类型",icon:"none"});else t.showToast({title:"请选择协助调查岗",icon:"none"});else t.showToast({title:"请输入利率",icon:"none"});else t.showToast({title:"请输入贷款用途",icon:"none"});else t.showToast({title:"请选择信用等级",icon:"none"});else t.showToast({title:"请选择评级模型",icon:"none"});else t.showToast({title:"请选择申请授信额度",icon:"none"});else t.showToast({title:"请选择客户类型",icon:"none"});else t.showToast({title:"请检索客户id",icon:"none"});else t.showToast({title:"请检索客户名称",icon:"none"})}}};e.default=c}).call(this,a("6e42")["default"])},c225:function(t,e,a){"use strict";a.r(e);var s=a("9917"),n=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);e["default"]=n.a},e24b:function(t,e,a){"use strict";a.r(e);var s=a("677e"),n=a("c225");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("4721");var o=a("2877"),r=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports}},[["ec1c","common/runtime","common/vendor"]]]);