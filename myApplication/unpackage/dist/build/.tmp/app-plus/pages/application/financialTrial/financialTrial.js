(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/application/financialTrial/financialTrial"],{"02b4":function(t,n,e){"use strict";e.r(n);var a=e("fa94"),i=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);n["default"]=i.a},"437a":function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement;t._self._c},i=[];e.d(n,"a",function(){return a}),e.d(n,"b",function(){return i})},"4bcc":function(t,n,e){"use strict";var a=e("e41e"),i=e.n(a);i.a},"51d9":function(t,n,e){"use strict";e.r(n);var a=e("437a"),i=e("02b4");for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);e("4bcc");var s=e("2877"),c=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,null,null);n["default"]=c.exports},e41e:function(t,n,e){},fa94:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("43ce"),i=e("1ea5"),o=function(){return e.e("components/uni-number-box/uni-number-box").then(e.bind(null,"db9a"))},s=function(){return e.e("components/tki-file-manager").then(e.bind(null,"16fd"))},c=function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"b072"))},u={components:{uniPopup:c,tkiFileManager:s,uniNumberBox:o},data:function(){return{dataInfo:{name:"财审会认定审批",jg:"",fqbm:"",sgxm:"",msg:"",money:0},seq:"",ishold:!1,path:[],isUp:!1}},onNavigationBarButtonTap:function(t){this.isKeep()},onLoad:function(t){this.getBm()},methods:{delList:function(t){this.path.splice(t.target.dataset.value,1)},doUpload:function(){if(this.ishold)if(0!=this.path.length){t.showLoading({title:"上传中",mask:!0});var n=[];this.path.map(function(t,e){n[e]={name:e+1,uri:""}}),this.path.map(function(t,e){n[e].uri=t});var e=this,o="http://".concat((0,a.baseIp)(),"/ams/system/distribute.htm?module=PJupload&userId=").concat((0,i.getUserInfo)().userId,"&mainId=").concat(e.seq);t.uploadFile({url:o,filePath:"",name:"",files:n,success:function(n){if("string"==typeof n.data)var a=JSON.parse(n.data);else a=n.data;1==a.code&&(e.isUp=!0,t.hideLoading(),t.showToast({title:a.message,mask:!0}))}})}else t.showToast({title:"请先选择资料！",icon:"none"});else t.showModal({title:"您还没有保存",content:"您还没有保存数据，请先保存！",success:function(t){t.confirm||t.cancel}})},getBm:function(){var n=this,e="http://".concat((0,a.baseIp)(),"/ams/system/distribute.htm?module=returndeptName_YD&userId=").concat((0,i.getUserInfo)().userId);t.request({url:e,success:function(t){n.dataInfo.fqbm=n.dataInfo.jg=t.data.deptName}})},change:function(t){this.dataInfo.money=t},openFile:function(){this.$refs.filemanager._openFile()},upload:function(){this.$refs.filemanager._openFile()},resultPath:function(t){this.path.push("file://".concat(t))},isKeep:function(){if(""!=this.dataInfo.sgxm)if(""!=this.dataInfo.msg)if(this.dataInfo.money<=0)t.showToast({title:"请输入金额",icon:"none"});else{var n=this.dataInfo;n.userId=String((0,i.getUserInfo)().userId);var e="http://".concat((0,a.baseIp)(),'/ams/system/distribute.htm?module=addFinanceInfo_YD&credit={userId:"').concat(String(n.userId),'",purchaseAmount:"').concat(String(n.money),'",purchaseProject:"').concat(String(n.sgxm),'",ramrk:"').concat(String(n.msg),'"}'),o=this;t.showModal({title:"是否保存",content:"您还没有保存数据，是否保存？",success:function(n){n.confirm&&(t.showLoading({title:"保存中",mask:!0}),t.request({url:e,success:function(n){var e=n.data;1==e.code&&(t.hideLoading(),o.ishold=!0,o.seq=e.object.seq,t.showToast({title:e.message,mask:!0}))}}))}})}else t.showToast({title:"请输入摘要",icon:"none"});else t.showToast({title:"请输入申购项目",icon:"none"})},submitAcce:function(){if(this.ishold){if(!this.isUp)return void t.showModal({title:"您还没有上传资料",content:"您还没有上传资料，请先上传！",success:function(t){t.confirm||t.cancel}});t.showLoading({title:"提交中"});var n=this,e="http://".concat((0,a.baseIp)(),"/ams/system/distribute.htm?module=submitMainInfo4_YD&id=").concat(n.seq,"&userId=").concat((0,i.getUserInfo)().userId);t.request({url:e,success:function(n){var e=n.data;1==e.code&&(t.hideLoading(),t.showToast({title:e.message,mask:!0,duration:3e3}),setTimeout(function(){t.reLaunch({url:"/pages/tabBar/information/information"})},3e3))},fail:function(t){console.log(t," at pages\\application\\financialTrial\\financialTrial.vue:269")}})}else t.showModal({title:"您还没有保存",content:"您还没有保存数据，请先保存！",success:function(t){t.confirm?console.log("用户点击确定"," at pages\\application\\financialTrial\\financialTrial.vue:231"):t.cancel&&console.log("用户点击取消"," at pages\\application\\financialTrial\\financialTrial.vue:233")}})}}};n.default=u}).call(this,e("6e42")["default"])}},[["e30f","common/runtime","common/vendor"]]]);