(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/cpimg"],{"3ffd":function(t,e,i){"use strict";i.r(e);var n=i("a1cd7"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},"6f18":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"8de9":function(t,e,i){"use strict";i.r(e);var n=i("6f18"),a=i("3ffd");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("e5db");var s=i("2877"),o=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=o.exports},a1cd7:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=[],n="",a=0,r={name:"cpimg",props:{maxWidth:{type:Number,default:750},type:{type:String,default:"url"},ql:{type:Number,default:.92},iscamera:{type:Boolean,default:!1},src:{type:String,default:""},number:{type:Number,default:1},fixOrientation:{type:Boolean,default:!0},size:{type:Number,default:5e5}},data:function(){return{cWidth:750,cHeight:750}},onUnload:function(){},methods:{_changImg:function(e){var r=this;e?r._cpImg(e):""==r.src?r.iscamera?t.chooseImage({count:r.number,sizeType:["compressed"],sourceType:["camera"],success:function(t){i=[],n=t.tempFilePaths,a=0,r._cpImg()},fail:function(t){r._err(t)}}):t.chooseImage({count:r.number,sizeType:["compressed"],sourceType:["camera","album"],success:function(t){i=[],n=t.tempFilePaths,a=0,r._cpImg()},fail:function(t){r._err(t)}}):r._cpImg(r.src)},_cpImg:function(e){var i=this,r=n[a];function s(e,n){var a,s,o=e.width,u=e.height,c=1,h=1;(n/1024>=i.size||e.width>=i.maxWidth)&&(e.width>=e.height&&e.width>=i.maxWidth?(e.height=i.maxWidth*e.height/e.width,e.width=i.maxWidth):e.width<e.height&&e.height>=i.maxWidth&&(e.width=i.maxWidth*e.width/e.height,e.height=i.maxWidth),c=e.width/o,h=e.height/u),a=o*c,s=u*h;var f=t.createCanvasContext("_myCanvas",i);if(i.cWidth=e.width,i.cHeight=e.height,i.fixOrientation){var d=e.orientation;[5,6,7,8,"right","left","right-mirrored","left-mirrored"].indexOf(d)>-1&&(i.cWidth=e.height,i.cHeight=e.width),2==d||"up-mirrored"==d?(f.translate(a,0),f.scale(-1,1)):3==d||"down"==d?(f.translate(a,s),f.rotate(Math.PI)):4==d||"down-mirrored"==d?(f.translate(0,s),f.scale(1,-1)):5==d||"right-mirrored"==d?(f.rotate(.5*Math.PI),f.scale(1,-1)):6==d||"right"==d?(f.rotate(.5*Math.PI),f.translate(0,-s)):7==d||"left-mirrored"==d?(f.rotate(.5*Math.PI),f.translate(a,-s),f.scale(-1,1)):8==d||"left"==d?(f.rotate(-.5*Math.PI),f.translate(-a,0)):f.translate(0,0)}var l=0;l=10,setTimeout(function(){f.drawImage(r,0,0,a,s),f.draw(!1,function(){var e=0;e=10,setTimeout(function(){t.canvasToTempFilePath({width:Number(i.cWidth),height:Number(i.cHeight),destWidth:Number(i.cWidth),destHeight:Number(i.cHeight),canvasId:"_myCanvas",fileType:"jpg",quality:Number(i.ql),success:function(t){if("base64"==i.type){plus.io.resolveLocalFileSystemURL(t.tempFilePath,function(t){t.file(function(t){var e=new plus.io.FileReader;e.readAsDataURL(t),e.onloadend=function(t){2==t.target.readyState?i._result(t.target.result):i._err(t)}})},function(t){i._err(t)})}else i._result(t.tempFilePath)},fail:function(t){i._err(t)}},i)},e)})},l)}e?t.getImageInfo({src:e,success:function(n){t.getFileInfo({filePath:e,success:function(t){s(n,t.size)},fail:function(t){i._err(t)}})},fail:function(t){i._err(t)}}):(t.hideLoading(),t.showLoading({title:"图片压缩中 ".concat(a+1,"/").concat(n.length),mask:!0}),t.getImageInfo({src:r,success:function(e){t.getFileInfo({filePath:r,success:function(t){s(e,t.size)},fail:function(t){i._err(t)}})},fail:function(t){i._err(t)}}))},_reverseImgData:function(t){for(var e=t.width,i=t.height,n=0,a=0;a<i/2;a++)for(var r=0;r<4*e;r++)n=t.data[a*e*4+r],t.data[a*e*4+r]=t.data[(i-a-1)*e*4+r],t.data[(i-a-1)*e*4+r]=n;return t},_getH5ImageInfo:function(t,e){var i=new Image;i.src=t,i.onload=function(i){var n=this,a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(t){var i=this;if(200==i.status||0===i.status){var a=new FileReader;a.onload=function(t){var a=new DataView(this.result);if(65496!=a.getUint16(0,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var r=a.byteLength,s=2;while(s<r){var o=a.getUint16(s,!1);if(s+=2,65505==o){if(1165519206!=a.getUint32(s+=2,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var u=18761==a.getUint16(s+=6,!1);s+=a.getUint32(s+4,u);var c=a.getUint16(s,u);s+=2;for(var h=0;h<c;h++)if(274==a.getUint16(s+12*h,u))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:a.getUint16(s+12*h+8,u)})}else{if(65280!=(65280&o))break;s+=a.getUint16(s,!1)}}return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1})},a.readAsArrayBuffer(i.response)}},a.send()}},_result:function(t,e){i.push(t),a+=1,n.length-1>=a?this._cpImg():this.$emit("result",i)},_err:function(e){t.hideLoading(),this.$emit("err",e)}}};e.default=r}).call(this,i("6e42")["default"])},b6da:function(t,e,i){},e5db:function(t,e,i){"use strict";var n=i("b6da"),a=i.n(n);a.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/cpimg-create-component',
    {
        'components/cpimg-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("8de9"))
        })
    },
    [['components/cpimg-create-component']]
]);                
