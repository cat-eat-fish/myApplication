(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/application/bus/bus"],{"3d10":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("8938"),o=a("f035"),s=a("43fa"),i={data:function(){return{type:"",startDate:(0,o.getDate)("start"),endDate:(0,o.getDate)("end"),name:"用车审批",dataInfo:{title:1,jg:"",name:"",station:"",bm:"",phone:"",cause:"",busname:"",busnum:"",date:(0,o.formateDate)(new Date,"Y-M-D"),enddate:(0,o.formateDate)(new Date,"Y-M-D")},dept_id:"",seq:"",ishold:!1}},onLoad:function(){this.getBm()},methods:{bindDateChange:function(t){this.dataInfo.date=t.target.value},bindDateChange2:function(t){this.dataInfo.enddate=t.target.value},getBm:function(){var e=this,a="".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=getUserId_YD&userId=").concat((0,n.getUserInfo)().userName);t.request({url:a,success:function(t){var a=t.data.object[0];e.type=a.type,e.dataInfo.jg=e.dataInfo.bm=a.dept_name,e.dataInfo.name=a.name,e.dataInfo.phone=a.mobie,e.dataInfo.station=a.post,e.dept_id=a.dept_id}})},isKeep:function(){if(""!=this.dataInfo.busname)if(""!=this.dataInfo.busnum)if(""!=this.dataInfo.cause){var e=this.dataInfo;e.start="".concat(e.date),e.end="".concat(e.enddate);var a="".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=addCar_YD&id=").concat((0,n.getUserInfo)().userName,"&branchId=").concat(this.dept_id,"&type=").concat(this.type,"&busType=07&name=").concat(e.name,"&position=").concat(e.station,"&mobie=").concat(e.phone,"&dirver=").concat(e.busname,"&carNumber=").concat(e.busnum,"&applayDate1=").concat(e.start,"&applayDate2=").concat(e.end,"&carReason=").concat(e.cause,"&hr=true"),o=this;t.showModal({title:"是否保存",content:"保存后，请直接提交受理！",success:function(e){e.confirm&&(t.showLoading({title:"保存中",mask:!0}),t.request({url:a,success:function(e){var a=e.data;t.hideLoading(),1==a.code?(o.ishold=!0,o.seq=a.seq,t.showToast({title:a.message,mask:!0})):t.showToast({title:a.message,mask:!0})}}))}})}else t.showToast({title:"请输入用车事由",icon:"none"});else t.showToast({title:"请输入车牌号",icon:"none"});else t.showToast({title:"请输入司机名称",icon:"none"})},submitAcce:function(){if(this.ishold){t.showLoading({title:"提交中",mask:!0});var e=this,a="".concat((0,s.baseIp)(),"/ams/system/distribute.htm?module=submitCarMainInfo_YD&Id=").concat(e.seq,"&userId=").concat((0,n.getUserInfo)().userName,"&userId=").concat((0,n.getUserInfo)().userName,"&hr=true");t.request({url:a,success:function(e){var a=e.data;1==a.code&&(t.hideLoading(),t.showToast({title:a.message,mask:!0,duration:3e3}),setTimeout(function(){t.reLaunch({url:"/pages/tabBar/information/information"})},3e3))},fail:function(t){console.log(t," at pages\\application\\bus\\bus.vue:203")}})}else t.showModal({title:"您还没有保存",content:"您还没有保存数据，请先保存！",success:function(t){t.confirm?console.log("用户点击确定"," at pages\\application\\bus\\bus.vue:178"):t.cancel&&console.log("用户点击取消"," at pages\\application\\bus\\bus.vue:180")}})}}};e.default=i}).call(this,a("6e42")["default"])},6990:function(t,e,a){},"724f":function(t,e,a){"use strict";var n=a("6990"),o=a.n(n);o.a},a810:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},e33d:function(t,e,a){"use strict";a.r(e);var n=a("3d10"),o=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},faf4:function(t,e,a){"use strict";a.r(e);var n=a("a810"),o=a("e33d");for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);a("724f");var i=a("2877"),c=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports}},[["221d","common/runtime","common/vendor"]]]);