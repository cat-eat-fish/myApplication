(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/application/sign/sign"],{

/***/ 110:
/*!*********************************************************************!*\
  !*** E:/web/project/myApplication3/pages/application/sign/sign.vue ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _sign_vue_vue_type_template_id_24f353d2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sign.vue?vue&type=template&id=24f353d2& */ 111);
/* harmony import */ var _sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sign.vue?vue&type=script&lang=js& */ 113);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _sign_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sign.vue?vue&type=style&index=0&lang=css& */ 117);
/* harmony import */ var _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/vue-loader/lib/runtime/componentNormalizer.js */ 13);






/* normalize component */

var component = Object(_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _sign_vue_vue_type_template_id_24f353d2___WEBPACK_IMPORTED_MODULE_0__["render"],
  _sign_vue_vue_type_template_id_24f353d2___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "E:/web/project/myApplication3/pages/application/sign/sign.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 111:
/*!****************************************************************************************************!*\
  !*** E:/web/project/myApplication3/pages/application/sign/sign.vue?vue&type=template&id=24f353d2& ***!
  \****************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_template_id_24f353d2___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sign.vue?vue&type=template&id=24f353d2& */ 112);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_template_id_24f353d2___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_template_id_24f353d2___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });



/***/ }),

/***/ 112:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/web/project/myApplication3/pages/application/sign/sign.vue?vue&type=template&id=24f353d2& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  var g0 = _vm.name.substr(-2)
  _vm.$mp.data = Object.assign(
    {},
    {
      $root: {
        g0: g0
      }
    }
  )
}
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 113:
/*!**********************************************************************************************!*\
  !*** E:/web/project/myApplication3/pages/application/sign/sign.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sign.vue?vue&type=script&lang=js& */ 114);
/* harmony import */ var _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 114:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/web/project/myApplication3/pages/application/sign/sign.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(uni) {Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;





































































































































































































































































var _service = __webpack_require__(/*! @/service.js */ 8);


var _config = __webpack_require__(/*! @/config.js */ 9);









var _util = __webpack_require__(/*! @/common/util.js */ 115);





var _index = __webpack_require__(/*! @/js_sdk/gsq-image-tools/image-tools/index.js */ 116);var cpimg = function cpimg() {return __webpack_require__.e(/*! import() | components/cpimg */ "components/cpimg").then(__webpack_require__.bind(null, /*! @/components/cpimg.vue */ 419));};var uniPopup = function uniPopup() {return __webpack_require__.e(/*! import() | components/uni-popup/uni-popup */ "components/uni-popup/uni-popup").then(__webpack_require__.bind(null, /*! @/components/uni-popup/uni-popup.vue */ 426));};var uniIcon = function uniIcon() {return __webpack_require__.e(/*! import() | components/uni-icon/uni-icon */ "components/uni-icon/uni-icon").then(__webpack_require__.bind(null, /*! @/components/uni-icon/uni-icon.vue */ 391));};var uniCollapse = function uniCollapse() {return __webpack_require__.e(/*! import() | components/uni-collapse/uni-collapse */ "components/uni-collapse/uni-collapse").then(__webpack_require__.bind(null, /*! @/components/uni-collapse/uni-collapse.vue */ 405));};var uniList = function uniList() {return __webpack_require__.e(/*! import() | components/uni-list/uni-list */ "components/uni-list/uni-list").then(__webpack_require__.bind(null, /*! @/components/uni-list/uni-list.vue */ 433));};var uniCollapseItem = function uniCollapseItem() {return __webpack_require__.e(/*! import() | components/uni-collapse-item/uni-collapse-item */ "components/uni-collapse-item/uni-collapse-item").then(__webpack_require__.bind(null, /*! @/components/uni-collapse-item/uni-collapse-item.vue */ 412));};var _default =



{
  components: {
    uniCollapseItem: uniCollapseItem,
    uniList: uniList,
    uniCollapse: uniCollapse,
    uniIcon: uniIcon,
    uniPopup: uniPopup,
    cpimg: cpimg },

  data: function data() {
    return {
      inNum: null, //在打卡范围内的 第 N 个
      allInfo: [], //所有打卡范围内的信息
      allLoc: [], //所有打卡范围内的经纬度信息

      bankId: "", //部门Id
      standTime: "", //当前打卡标准时间

      nowSign: 0, //当前是哪个打卡   0 上午下班 1 上午下班 2 下午上班 3 下午下班

      name: (0, _service.getUserInfo)().name,
      bzText: {
        time: "",
        address: "",
        img: "",
        remarks: "" },

      type: "",

      r: 80, //半径
      morning_clock_in: "",
      morning_clock_out: "",
      afternoon_clock_in: "",
      afternoon_clock_out: "", //上下班时间
      isAm: false, //上午上班是否打卡
      isAmOut: false, //上午下班是否打卡
      isPmIn: false, //下午上班是否打卡
      isPm: false, //下午下班是否打卡
      amSign: {
        clock_time: "",
        address: "",
        remarks: "",
        img: "" },
      //上午打卡信息
      amOutSign: {
        clock_time: "",
        address: "",
        remarks: "",
        img: "" },
      //上午打卡信息
      pmInSign: {
        clock_time: "",
        address: "",
        remarks: "",
        img: "" },
      //下午打卡信息
      pmSign: {
        clock_time: "",
        address: "",
        remarks: "",
        img: "" },
      //下午打卡信息
      clickNum: 0, //点击重新获取位置信息次数
      is: null, //是否正常打卡（外勤打卡）
      isSign: false, //是否打卡
      time: (0, _util.formateDate)(new Date(), 'h:min:s'), //当前时分秒
      date: (0, _util.formateDate)(new Date(), 'Y-M-D'),
      img: "",
      servetime: "",
      nowtime: "",
      showErr: false,
      latitude: "", //当前经度
      longitude: "", //当前维度
      address: "我的位置", //
      wqInfo: null,
      allSign: [], //所有打卡信息				
      signInfo: {
        mode: "",
        latitude: "",
        longitude: "",
        address: "",
        time: "",
        remarks: "" },
      //打卡信息 （模式，经纬度，地址，时间）


      showData: {
        standTime: '',
        clockTime: '',
        status: '',
        file: '',
        userId: (0, _service.getUserInfo)().userName,
        bankId: '' } };


  },
  // 初始化
  onLoad: function onLoad() {
    this.getTime();
    this.getData();
  },
  methods: {
    doInfo: function doInfo() {
      var that = this;
      uni.showModal({
        title: '上传照片提示',
        content: '检测到您第一次打卡，请先拍照上传照片！',
        success: function success(res) {
          if (res.confirm) {
            uni.chooseImage({
              count: 1,
              sizeType: ['compressed'], //'original', 
              sourceType: ['camera'], //
              success: function success(res) {
                var img = res.tempFilePaths[0];
                that.img = img;
                var url = "".concat(
                (0, _config.baseIp)(), "/ams/system/distribute.htm?module=saveBasicPhoto_YD&userId=").concat((0, _service.getUserInfo)().userName);

                uni.uploadFile({
                  url: url,
                  filePath: res.tempFilePaths[0],
                  name: 'file',
                  success: function success(Res) {
                    var data = JSON.parse(Res.data);
                    uni.showToast({
                      title: data.message,
                      mask: true });

                  } });

              },
              fail: function fail(err) {
                uni.navigateBack();
              } });

          } else if (res.cancel) {
            uni.navigateBack();
          }
        } });

    },
    togglePopup: function togglePopup(type) {
      this.type = type;
    },
    // 查看规则 
    goRule: function goRule() {
      uni.navigateTo({
        url: "/pages/application/rule/rule" });

    },
    // 腾讯位置服务
    getAdd: function getAdd() {
      if (this.isAm && this.isPm && this.isAmOut && this.isPmIn) {
        return;
      }
      if (this.is === true) {
        return;
      }
      var that = this;
      var key = _config.txKey;
      var url = "https://apis.map.qq.com/ws/geocoder/v1/?location=".concat(that.latitude, ",").concat(that.longitude, "&key=").concat(key);
      uni.request({
        url: url,
        success: function success(res) {
          var data = res.data;
          if (data.status != 0) {
            uni.showToast({
              title: data.message,
              icon: "none" });

            return;
          }
          if (that.is === null) {
            that.address = "请检查位置信息！";
          }
          if (that.is === false) {
            var address = res.data.result.address + res.data.result.formatted_addresses.recommend;
            that.address = address;
            that.signInfo.address = address;
          }
        } });

    },
    // 初始化数据  （公司的经纬度 公司名称 打卡范围 ）
    getData: function getData() {
      var that = this;
      var url = "".concat((0, _config.baseIp)(), "/ams/system/distribute.htm?module=findAttendanceRules_YD&date=").concat(this.date, "&userId=").concat((0, _service.getUserInfo)().userName);

      uni.request({
        url: url,
        success: function success(res) {
          // console.log(res)
          var a = 5 * 60;
          var nowtime = Math.round(new Date() / 1000);
          var time = res.data.time;
          var jia = nowtime + a;
          var jian = nowtime - a;
          // console.log(formateDate((new Date(Number(jia+'000'))),"Y-M-D h:min:s"))
          // console.log(formateDate((new Date(Number(jian+'000'))),"Y-M-D h:min:s"))
          var bj = jia > time && jian < time;
          if (!bj) {
            var sjc = time + '000';
            that.servetime = (0, _util.formateDate)(new Date(Number(sjc)), "Y-M-D h:min:s");
            that.nowtime = (0, _util.formateDate)(new Date(), 'Y-M-D h:min:s');;
            that.showErr = true;
            return;
          }
          if (res.data.code == 2) {
            uni.showToast({
              title: res.data.message,
              mask: true,
              icon: "none",
              duration: 3000 });

            setTimeout(function () {
              uni.navigateBack();
            }, 3000);
            return;
          }
          var data = res.data.object;
          that.allInfo = data;
          var arr = [];
          data.map(function (item, index) {
            var a1 = [];
            a1.push(Number(item.latitude), Number(item.longitude));
            arr.push(a1);
          });
          that.allLoc = arr.concat();
          that.r = Number(data[0].clock_scope);
          that.getLocation();
          that.morning_clock_in = data[0].morning_clock_in;
          that.morning_clock_out = data[0].morning_clock_out;
          that.afternoon_clock_in = data[0].afternoon_clock_in;
          that.afternoon_clock_out = data[0].afternoon_clock_out;


          that.showData.bankId = that.bankId = res.data.object[0].deptid;
          // 是否有原始照片
          if (res.data.code1 == "0") {
            that.doInfo();
          }


          if (res.data.object2.length == 0) {
            that.nowSign = 0;
            that.isAm = false;
            that.isAmOut = false;
            that.isPmIn = false;
            that.isPm = false;
            that.amSign = {};
            that.amOutSign = {};
            that.pmInSign = {};
            that.pmSign = {};
            return;
          }
          res.data.object2.map(function (item, index) {
            var i = item.picture.indexOf("ams");
            var img = item.picture.substring(i);

            img = img.replace(/\\/g, '/');
            item.picture = "".concat((0, _config.baseIp)(), "/").concat(img);
          });
          // 是否有今天打卡信息

          if (res.data.object2.length != 0) {
            res.data.object2.map(function (item, index) {
              item.clock_time = item.clock_time.substring(10, 16);
            });
          }

          // console.log(JSON.stringify(res.data.object2));

          if (res.data.object2.length == 1) {
            if (res.data.object2[0].stand_time == that.morning_clock_in) {
              that.isAm = true;
              that.nowSign = 1;
              that.amSign = res.data.object2[0];
            } else if (res.data.object2[0].stand_time == that.morning_clock_out) {
              // that.isAm = false;
              that.isAmOut = true;
              that.nowSign = 2;
              // that.amSign = res.data.object2[0];
              that.amOutSign = res.data.object2[0];
            } else if (res.data.object2[0].stand_time == that.afternoon_clock_in) {
              // that.isAm = false;
              // that.isAmOut = false;
              that.isPmIn = true;
              that.nowSign = 3;
              // that.amSign = res.data.object2[0];
              // that.amOutSign = res.data.object2[1];
              that.pmInSign = res.data.object2[0];
            } else if (res.data.object2[0].stand_time == that.afternoon_clock_out) {
              // that.isAm = false;
              // that.isAmOut = false;
              // that.isPmIn = false;
              that.isPm = true;
              that.nowSign = 4;
              // that.amSign = res.data.object2[0];
              // that.amOutSign = res.data.object2[1];
              // that.pmInSign = res.data.object2[2];
              that.pmSign = res.data.object2[0];
            }
          } else if (res.data.object2.length == 2) {
            if (res.data.object2[0].stand_time == that.morning_clock_in) {
              that.isAm = true;
              that.amSign = res.data.object2[0];
              if (res.data.object2[1].stand_time == that.morning_clock_out) {
                that.isAmOut = true;
                that.amOutSign = res.data.object2[1];
                that.nowSign = 2;
              }
              if (res.data.object2[1].stand_time == that.afternoon_clock_in) {
                that.isPmIn = true;
                that.pmInSign = res.data.object2[1];
                that.nowSign = 3;
              }
              if (res.data.object2[1].stand_time == that.afternoon_clock_out) {
                that.isPm = true;
                that.pmSign = res.data.object2[1];
                that.nowSign = 4;
              }
            } else if (res.data.object2[0].stand_time == that.morning_clock_out) {
              that.isAmOut = true;
              that.amOutSign = res.data.object2[0];
              if (res.data.object2[1].stand_time == that.afternoon_clock_in) {
                that.isPmIn = true;
                that.pmInSign = res.data.object2[1];
                that.nowSign = 3;
              }
              if (res.data.object2[1].stand_time == that.afternoon_clock_out) {
                that.isPm = true;
                that.pmSign = res.data.object2[1];
                that.nowSign = 4;
              }
            } else if (res.data.object2[0].stand_time == that.afternoon_clock_in) {
              that.isPmIn = true;
              that.pmInSign = res.data.object2[0];
              if (res.data.object2[1].stand_time == that.afternoon_clock_out) {
                that.isPm = true;
                that.pmSign = res.data.object2[1];
                that.nowSign = 4;
              }
            }
            // else if(res.data.object2[0].stand_time == that.afternoon_clock_out){
            // 	that.isPmIn = true;
            // 	that.isPm = true;
            // 	that.nowSign = 4;
            // 	that.pmInSign = res.data.object2[0];
            // 	that.pmSign = res.data.object2[1];
            // }
          } else if (res.data.object2.length == 3) {
            if (res.data.object2[0].stand_time == that.morning_clock_in) {
              that.isAm = true;
              that.amSign = res.data.object2[0];
              if (res.data.object2[1].stand_time == that.morning_clock_out) {
                that.isAmOut = true;
                that.amOutSign = res.data.object2[1];
                if (res.data.object2[2].stand_time == that.afternoon_clock_in) {
                  that.isPmIn = true;
                  that.nowSign = 3;
                  that.pmInSign = res.data.object2[2];
                }
                if (res.data.object2[2].stand_time == that.afternoon_clock_out) {
                  that.isPm = true;
                  that.nowSign = 4;
                  that.pmSign = res.data.object2[2];
                }
              } else if (res.data.object2[1].stand_time == that.afternoon_clock_in) {
                that.isPmIn = true;
                that.nowSign = 3;
                that.pmInSign = res.data.object2[2];
                that.isPm = true;
                that.nowSign = 4;
                that.pmSign = res.data.object2[2];
              }
            } else if (res.data.object2[0].stand_time == that.morning_clock_out) {
              that.isAmOut = true;
              that.isPmIn = true;
              that.isPm = true;
              that.nowSign = 4;
              that.amOutSign = res.data.object2[0];
              that.pmInSign = res.data.object2[1];
              that.pmSign = res.data.object2[2];
            }

          } else if (res.data.object2.length == 4) {
            if (res.data.object2[0].stand_time == that.morning_clock_in) {
              that.isAm = true;
              that.isAmOut = true;
              that.isPmIn = true;
              that.isPm = true;
              that.nowSign = 4;
              that.amSign = res.data.object2[0];
              that.amOutSign = res.data.object2[1];
              that.pmInSign = res.data.object2[2];
              that.pmSign = res.data.object2[3];
            }
          }
        } });

    },
    // 获取当前位置
    getLocation: function getLocation() {
      var that = this;
      if (this.clickNum !== 0) {
        uni.showLoading({
          title: "获取中...",
          mask: true });

      }
      if (this.clickNum >= 3) {
        uni.showToast({
          title: "请稍后尝试！",
          icon: "none",
          mask: true });

        return;
      }
      this.clickNum++;

      wx.getLocation({
        type: 'gcj02', //返回可以用于wx.openLocation的经纬度
        success: function success(res) {
          uni.hideLoading();
          that.latitude = res.latitude;
          that.longitude = res.longitude;
          var as = that.allLoc.map(function (item, index) {
            var arr = [];
            var s = (0, _util.pointInsideCircle)([res.latitude, res.longitude], [item[0], item[1]], that.r / 100000);
            if (s) {
              arr[0] = s;
              arr[1] = index;
              return arr;
            }
          });
          if (as[0] === undefined) {
            that.is = false;
            that.signInfo.mode = "外勤打卡";
          } else {
            that.is = true;
            that.signInfo.mode = "正常打卡";
            that.inNum = as[0][1];
            var address = that.allInfo[as[0][1]].place_name;
            that.address = address;
            that.signInfo.address = address;
          }
          that.signInfo.latitude = res.latitude;
          that.signInfo.longitude = res.longitude;
          that.getAdd();
        },
        fail: function fail(err) {
          uni.hideLoading();
          that.address = "请检查位置信息！";
          uni.showToast({
            title: "请检查位置信息状态！",
            icon: "none",
            mask: true,
            duration: 3000 });

        } });
















































    },
    // 重新定位
    relocation: function relocation(e) {
      if (e == 'morning_clock_in') {
        var a = this.morning_clock_in;
      } else if (e == 'morning_clock_out') {
        var a = this.morning_clock_out;
      } else if (e == 'afternoon_clock_in') {
        var a = this.afternoon_clock_in;
      } else if (e == 'afternoon_clock_out') {
        var a = this.afternoon_clock_out;
      }
      uni.navigateTo({
        url: "/pages/application/sign2/sign2?standTime=".concat(a) });

    },
    // 选择打卡日期
    bindDateChange: function bindDateChange(e) {
      var date = e.target.value;
      this.date = date;
      this.getData();
    },
    // 显示备注
    showBz: function showBz(type) {
      this.type = 'middle-list';
      if (type == 'amSign') {
        this.bzText.time = this.amSign.clock_time;
        this.bzText.address = this.amSign.clock_place;
        this.bzText.remarks = this.amSign.remark;
        this.bzText.img = "".concat(this.amSign.picture);
      }
      if (type == 'amOutSign') {
        this.bzText.time = this.amOutSign.clock_time;
        this.bzText.address = this.amOutSign.clock_place;
        this.bzText.remarks = this.amOutSign.remark;
        this.bzText.img = "".concat(this.amOutSign.picture);
      }
      if (type == 'pmInSign') {
        this.bzText.time = this.pmInSign.clock_time;
        this.bzText.address = this.pmInSign.clock_place;
        this.bzText.img = "".concat(this.pmInSign.picture);
        this.bzText.remarks = this.pmInSign.remark;
      }
      if (type == 'pmSign') {
        this.bzText.time = this.pmSign.clock_time;
        this.bzText.address = this.pmSign.clock_place;
        this.bzText.remarks = this.pmSign.remark;
        this.bzText.img = "".concat(this.pmSign.picture);
      }
    },
    // 实时时间
    getTime: function getTime() {
      var that = this;
      setInterval(function () {
        that.time = (0, _util.formateDate)(new Date(), 'h:min:s');
      }, 1000);
    },

    cpimgOk: function cpimgOk(file) {
      this.showData.file = this.img = file[0];
      var that = this;
      setTimeout(function () {
        that.handSign();
      }, 800);

    },
    handSign: function handSign() {
      uni.showLoading({ title: '打卡记录中' });
      var url = "".concat((0, _config.baseIp)(), "/ams/system/distribute.htm?module=workRecord_YD");
      var data = {
        file: this.showData.file,
        userId: (0, _service.getUserInfo)().userName,
        bankId: this.showData.bankId,
        clockTime: (0, _util.formateDate)(new Date(), 'Y-M-D h:min:s'),
        standTime: this.showData.standTime,
        remark: this.signInfo.remarks,
        longitude: this.longitude,
        latitude: this.latitude,
        status: this.showData.status,
        clockPlace: this.signInfo.address };

      uni.request({
        url: url,
        method: "POST",
        data: data,
        success: function success(Res) {
          uni.hideLoading();
          var data = Res.data;
          if (typeof data == "string") {
            data = eval('(' + data + ')');
          }
          if (typeof data == "object") {
            if (data.code == 1) {
              uni.showToast({ title: data.message, mask: true, duration: 3000 });
              setTimeout(function () {
                uni.reLaunch({
                  url: "/pages/tabBar/information/information" });

              }, 3000);
            } else {
              uni.showToast({ title: data.message, icon: "none", mask: true, duration: 3000 });
            }
          }
        },
        fail: function fail(err) {
          uni.hideLoading();
          uni.showToast({ title: err.errMsg, icon: "none" });
        } });

    },
    cpimgErr: function cpimgErr(e) {
      console.log(e);
    },


    // 点击打卡
    clickSign: function clickSign(e) {
      var that = this;
      var isTrue = this.is;
      if (isTrue === null) {
        uni.showToast({
          title: "请检查位置信息状态！",
          icon: "none",
          mask: true,
          duration: 3000 });

        return;
      }
      var logTime = 1000 * 60 * 30;
      if (e == 'morning_clock_in') {
        var a = this.morning_clock_in;
        var nowTime = new Date().getTime();
        var time = (0, _util.formateDate)(new Date(), "Y-M-D") + ' ' + a;
        time = time.replace(/-/g, ':').replace(' ', ':');
        time = time.split(':');
        var time1 = new Date(time[0], time[1] - 1, time[2], time[3], time[4], time[5]);
        var bzTime = time1.getTime();
        var textbz = (0, _util.formateDate)(new Date(bzTime), "h:min");
        var logTime = bzTime - logTime;
        var textlog = (0, _util.formateDate)(new Date(logTime), "h:min");
        if (nowTime < logTime) {
          uni.showToast({
            title: "\u4E0A\u5348\u4E0A\u73ED\u6253\u5361\u65F6\u95F4\u8303\u56F4\u4E3A".concat(textlog, " -- ").concat(textbz, "\uFF01"),
            icon: "none",
            mask: true,
            duration: 3000 });

          return;
        }
      } else if (e == 'morning_clock_out') {
        var a = this.morning_clock_out;
      } else if (e == 'afternoon_clock_in') {
        var a = this.afternoon_clock_in;
        var nowTime = new Date().getTime();
        var time = (0, _util.formateDate)(new Date(), "Y-M-D") + ' ' + a;
        time = time.replace(/-/g, ':').replace(' ', ':');
        time = time.split(':');
        var time1 = new Date(time[0], time[1] - 1, time[2], time[3], time[4], time[5]);
        var bzTime = time1.getTime();
        var textbz = (0, _util.formateDate)(new Date(bzTime), "h:min");
        var logTime = bzTime - logTime;
        var textlog = (0, _util.formateDate)(new Date(logTime), "h:min");
        if (nowTime < logTime) {
          uni.showToast({
            title: "\u4E0B\u5348\u4E0A\u73ED\u6253\u5361\u65F6\u95F4\u8303\u56F4\u4E3A".concat(textlog, " -- ").concat(textbz, "\uFF01"),
            icon: "none",
            mask: true,
            duration: 3000 });

          return;
        }
      } else if (e == 'afternoon_clock_out') {
        var a = this.afternoon_clock_out;
      }

      // var img = res.tempFilePaths[0];
      // that.img = img;
      // uni.showLoading({title:"打卡记录中...",mask:true})
      if (a == that.morning_clock_in) {
        var status1 = that.compareDate(a.substr(0, 5), (0, _util.formateDate)(new Date(), 'h:min')) ? '00' : '01';
      } else if (a == that.morning_clock_out) {
        var status1 = that.compareDate(a.substr(0, 5), (0, _util.formateDate)(new Date(), 'h:min')) ? '02' : '00';
      } else if (a == that.afternoon_clock_in) {
        var status1 = that.compareDate(a.substr(0, 5), (0, _util.formateDate)(new Date(), 'h:min')) ? '00' : '01';
      } else if (a == that.afternoon_clock_out) {
        var status1 = that.compareDate(a.substr(0, 5), (0, _util.formateDate)(new Date(), 'h:min')) ? '02' : '00';
      }
      var status2 = that.signInfo.mode === '正常打卡' ? '00' : that.signInfo.mode == '外勤打卡' ? '03' : '';
      var status = "".concat(status1, ",").concat(status2);

      this.showData.standTime = a;
      this.showData.status = status;

      // if(that.signInfo.mode == '外勤打卡'){
      // 	uni.showModal({title: '',content: '您当前为外勤，不能打卡！'});
      // 	return;
      // }

      this.$refs.cpimgs._changImg();

    },

    // 时分比较
    compareDate: function compareDate(t1, t2) {
      var a1 = Number(t1.substr(0, 2));
      var a2 = Number(t1.substr(3));

      var b1 = Number(t2.substr(0, 2));
      var b2 = Number(t2.substr(3));
      if (a1 > b1) {
        return true;
      } else if (a1 < b1) {
        return false;
      } else if (a1 == b1) {
        if (a2 >= b2) {
          return true;
        } else if (a2 < b2) {
          return false;
        }
      }
    } } };exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["default"]))

/***/ }),

/***/ 117:
/*!******************************************************************************************************!*\
  !*** E:/web/project/myApplication3/pages/application/sign/sign.vue?vue&type=style&index=0&lang=css& ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sign.vue?vue&type=style&index=0&lang=css& */ 118);
/* harmony import */ var _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_6_oneOf_1_2_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_D_hbuildx_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_sign_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 118:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/web/project/myApplication3/pages/application/sign/sign.vue?vue&type=style&index=0&lang=css& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ })

},[[109,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/application/sign/sign.js.map